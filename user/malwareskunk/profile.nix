args@{ config, pkgs, systemPath, ... }:
let
  law = import (systemPath + /law.nix) args;
in
{
  imports = [
    ./desktop/hyprland/hyprland.nix

    (law.makeSystemUserModule (import ./user.nix args))
  ];

  services.xserver = {
    xkb.layout = "us,br";
    xkb.options = "grp:grp:alt_shift_toggle";

    enable = true;
  };

  environment.systemPackages = with pkgs; [
    docker
    docker-compose
    mullvad-vpn
  ];

  virtualisation.docker.enable = true;
  virtualisation.docker.storageDriver = "btrfs";
  virtualisation.docker.rootless = {
    enable = true;
    setSocketVariable = true;
  };

  services.mullvad-vpn.enable = true;
  services.mullvad-vpn.package = pkgs.mullvad-vpn;

  networking.firewall.allowedTCPPorts = [ 57621 ];
  networking.firewall.allowedUDPPorts = [ 5353 ];

  networking.nameservers = [ "1.1.1.1" "8.8.8.8" ];

  time.timeZone = "America/Bahia";
}
