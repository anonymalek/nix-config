args@{ pkgs, userPath, ... }:
let
  term = "xterm-256color";
  terminal = "kitty";
  browser = "librewolf";
  visual = "code";
  editor = "nvim";
in
{
  imports = [
    (userPath + /shared/shared.nix)
    ./desktop/hyprland/dotfiles.nix
  ];

  home.stateVersion = "23.11";

  home.packages = with pkgs; [
    (atlauncher.override { additionalLibs = [ xorg.libX11 xorg.libXcursor ]; })

    # util tools
    kitty
    zathura

    # music listening
    mpd
    ncmpcpp

    gnupg

    # casual coding
    neovim
    qemu_full

    # work
    jdk
    vscode

    # recording
    obs-studio

    # sound-related stuff
    jack2
    a2jmidid
    pavucontrol

    # custom scripts
    # TODO
  ];

  home.sessionVariables = {
    TERM = term;
    TERMINAL = terminal;
    BROWSER = browser;
    VISUAL = visual;
    EDITOR = editor;
  };

  services.unclutter = {
    enable = true;
    timeout = 2;
  };

  home.file.".config/libvirt".source = ./libvirt;

  home.file.".local/share/fonts".source = ./dots/fonts;
  home.file.".theme".source = ./dots/theme;
  home.file.".local/share/icons".source = ./dots/icons;

  home.file.".config/dunst".source = ./dots/dunst;
  home.file.".config/hypr".source = ./dots/hypr;
  home.file.".config/kitty".source = ./dots/kitty;
  home.file.".config/nvim".source = ./dots/nvim;
  home.file.".config/sway".source = ./dots/sway;
  home.file.".config/ulauncher".source = ./dots/ulauncher;
  home.file.".config/waybar".source = ./dots/waybar;

  home.gtk = {
    enable = true;
    theme = {
      name = "Everforest-Dark-B-MB";
      package = pkgs.everforest-gtk-theme;
    };
    iconTheme = {
      name = "Everforest-Dark";
      package = pkgs.everforest-gtk-theme;
    };

    gtk3.extraConfig = {
      Settings = ''
        gtk-application-prefer-dark-theme=1
      '';
    };

    gtk4.extraConfig = {
      Settings = ''
        gtk-application-prefer-dark-theme=1
      '';
    };
  };

  home.pointerCursor = {
    gtk.enable = true;
    x11.enable = true;
    name = "Breeze_Dark_Teal";
    size = 48;
    package =
      pkgs.runCommand "moveUp" {} ''
        mkdir -p $out/share/icons
        ln -s /home/malwareskunk/.local/share/icons/Breeze_Dark_Teal $out/share/icons/Breeze_Dark_Teal
      '';
  };

  programs.home-manager.enable = true;
}
