args@{ pkgs, userPath, ... }:
let
  term = "xterm-256color";
  terminal = "kitty";
  browser = "firefox";
  visual = "code";
  editor = "nvim";
in
{
  imports = [
    (userPath + /shared/shared.nix)
  ];

  home.stateVersion = "23.11";

  home.packages = with pkgs; [
    (atlauncher.override { additionalLibs = [ xorg.libX11 xorg.libXcursor ]; })

    # util tools
    kitty
    zathura
    nwg-look

    # music listening
    mpd
    ncmpcpp
    spotify

    gnupg

    # casual coding
    neovim
    qemu_full

    # work
    vscode

    # recording
    obs-studio

    # sound-related stuff
    jack2
    a2jmidid
    pavucontrol

    # custom scripts
    (pkgs.writeShellScriptBin "warp" ''
      nix-shell /etc/nixos/user/malwareskunk/environments/$1.nix
      echo "warped out"
    '')
  ];

  home.sessionVariables = {
    TERM = term;
    TERMINAL = terminal;
    BROWSER = browser;
    VISUAL = visual;
    EDITOR = editor;
  };

  services.unclutter = {
    enable = true;
    timeout = 2;
  };

  home.file.".config/libvirt".source = ./libvirt;

  home.file.".bashrc".source = ./dots/bashrc;
  home.file.".local/share/fonts".source = ./dots/fonts;
  home.file.".theme".source = ./dots/theme;
  home.file.".local/share/icons/Breeze_Dark_Teal".source = ./dots/icons/Breeze_Dark_Teal;

  home.file.".config/dunst".source = ./dots/config/dunst;
  home.file.".config/hypr".source = ./dots/config/hypr;
  home.file.".config/kitty".source = ./dots/config/kitty;
  home.file.".config/nvim".source = ./dots/config/nvim;
  home.file.".config/sway".source = ./dots/config/sway;
  home.file.".config/waybar".source = ./dots/config/waybar;

  gtk = {
    enable = true;

    theme = {
      name = "Everforest-Dark-B";
      package = pkgs.everforest-gtk-theme;
    };

    iconTheme = {
      name = "Everforest-Dark";
      package = pkgs.everforest-gtk-theme;
    };

    cursorTheme = {
      size = 24;
      name = "Breeze_Dark_Teal";
    };

    gtk3.extraConfig = {
      Settings = ''
        gtk-application-prefer-dark-theme=1
      '';
    };

    gtk4.extraConfig = {
      Settings = ''
        gtk-application-prefer-dark-theme=1
      '';
    };
  };

  programs.home-manager.enable = true;
}
